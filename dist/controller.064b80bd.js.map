{"version":3,"sources":["js/carousel/config.js","js/carousel/view.js","js/carousel/model.js","js/carousel/controller.js"],"names":["API_KEY","API_URL","View","document","querySelector","renderResults","data","_data","generateMarkup","handleCarousel","clearHTML","_parentContainer","innerHTML","allImgs","map","drink","i","markup","idDrink","strDrink","strDrinkThumb","renderHTML","insertDot","setActiveDot","dot","_dotContainer","insertAdjacentHTML","html","imgs","querySelectorAll","titles","forEach","img","style","transform","_currentImg","title","handleCarouselClick","e","target","closest","value","Number","dataset","length","console","log","scrollCarousel","dotIndex","index","scrollCarouselTo","id","drinkId","toggleModal","dots","classList","remove","add","fetchDrinkInfo","url","res","fetch","drinks","json","name","instructions","strInstructions","_drinkInfo","populateModal","modal","closeModal","contains","addEventHandlers","btn","addEventListener","changePage","bind","Data","totalImgs","loadResults","ok","Error","state","Math","ceil","error","message","model","view"],"mappings":"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","file":"controller.064b80bd.js","sourceRoot":"..","sourcesContent":["export const API_KEY = '9973533'; // PERSONAL API_KEY FROM PATREON\r\nexport const API_URL = `http://www.thecocktaildb.com/api/json/v2/${API_KEY}/latest.php`;","import { API_KEY } from './config.js';\r\n\r\nclass View {\r\n  _parentContainer = document.querySelector('.img-carousel-container');\r\n  _data;\r\n  _currentImg = 0;\r\n  _dotContainer = document.querySelector('.img-dots');\r\n  _drinkInfo;\r\n\r\n  async renderResults(data) {\r\n    this._data = data;\r\n    // console.log(this._data);\r\n\r\n    await this.generateMarkup();\r\n\r\n    this.handleCarousel();\r\n  }\r\n\r\n  clearHTML() {\r\n    this._parentContainer.innerHTML = '';\r\n  }\r\n\r\n  generateMarkup() {\r\n    this._data.allImgs.map((drink, i) => {\r\n      const markup = `\r\n          <div data-drink-id=\"${drink.idDrink}\" class=\"carousel-title-wrapper\"><h4 class=\"carousel-title\">${drink.strDrink}</h4></div>\r\n          <img class=\"img-cocktail\" data-index=\"${i}\" src=\"${drink.strDrinkThumb}\" alt=\"${drink.strDrink} thumbnail\" />\r\n          `;\r\n      this.renderHTML(markup);\r\n      this.insertDot(i);\r\n    });\r\n    this.setActiveDot();\r\n  }\r\n\r\n  insertDot(i) {\r\n    const dot = `\r\n        <div data-index=\"${i}\" class=\"dot\"></div>\r\n      `;\r\n    this._dotContainer.insertAdjacentHTML('beforeend', dot);\r\n  }\r\n\r\n  renderHTML(html) {\r\n    this._parentContainer.insertAdjacentHTML('beforeend', html);\r\n  }\r\n\r\n  handleCarousel() {\r\n    const imgs = document.querySelectorAll('.img-cocktail');\r\n    const titles = document.querySelectorAll('.carousel-title-wrapper');\r\n    imgs.forEach((img, i) => {\r\n      img.style.transform = `translateX(${100 * (i - this._currentImg)}%)`;\r\n    });\r\n    titles.forEach((title, i) => {\r\n      title.style.transform = `translateX(${-200 * (i - this._currentImg)}%)`;\r\n    });\r\n  }\r\n\r\n  handleCarouselClick(e) {\r\n    if (e.target.closest('button')) {\r\n      const value = Number(e.target.closest('button').dataset.value);\r\n      if (this._currentImg <= 0 && value === -1 ||\r\n          this._currentImg >= this._data.allImgs.length - 1 && value === 1) return console.log(\"Can't Do that!\");\r\n      this.scrollCarousel(value);\r\n    } else if (e.target.closest('.dot')) {\r\n      const dotIndex = e.target.dataset.index;\r\n      this.scrollCarouselTo(dotIndex);\r\n    } else if (e.target.closest('.carousel-title-wrapper')) {\r\n      const id = e.target.closest('.carousel-title-wrapper').dataset.drinkId;\r\n      // console.log(id);\r\n      this.toggleModal(id);\r\n    } else {\r\n      return;\r\n    }\r\n\r\n  }\r\n\r\n  scrollCarousel(value) {\r\n    this._currentImg += value;\r\n    console.log(this._currentImg);\r\n    const imgs = document.querySelectorAll('.img-cocktail');\r\n    const titles = document.querySelectorAll('.carousel-title-wrapper');\r\n    imgs.forEach((img, i) => {\r\n      img.style.transform = `translateX(${100 * (i - this._currentImg)}%)`;\r\n    });\r\n    titles.forEach((title, i) => {\r\n      title.style.transform = `translateX(${-200 * (i - this._currentImg)}%)`;\r\n    });\r\n    this.setActiveDot();\r\n  }\r\n\r\n  scrollCarouselTo(i) {\r\n    const imgs = document.querySelectorAll('.img-cocktail');\r\n    const titles = document.querySelectorAll('.carousel-title-wrapper');\r\n    this._currentImg = Number(i);\r\n    imgs.forEach((img, i) => {\r\n      img.style.transform = `translateX(${100 * (i - this._currentImg)}%)`;\r\n    });\r\n    titles.forEach((title, i) => {\r\n      title.style.transform = `translateX(${-200 * (i - this._currentImg)}%)`;\r\n    });\r\n    this.setActiveDot();\r\n  }\r\n\r\n  setActiveDot() {\r\n    const dots = document.querySelectorAll('.dot');\r\n    const index = Number(this._currentImg);\r\n    dots.forEach((dot, i) => {\r\n      dot.classList.remove('active');\r\n      if (index === i) dot.classList.add('active');\r\n    });\r\n  }\r\n\r\n    // I know this is not supposed to be in the View... :(\r\n  async toggleModal(id) {\r\n    await this.fetchDrinkInfo(id);\r\n  }\r\n\r\n  async fetchDrinkInfo(id) {\r\n    const url = `https://www.thecocktaildb.com/api/json/v2/${API_KEY}/lookup.php?i=`;\r\n    try {\r\n      console.log(`url: ${url}${id}`);\r\n      const res = await fetch(`${url}${id}`);\r\n      const {drinks} = await res.json();\r\n      const data = drinks[0];\r\n      const drink = {\r\n        id: id,\r\n        name: data.strDrink,\r\n        img: data.strDrinkThumb,\r\n        instructions: data.strInstructions\r\n      };\r\n      console.log(drink);\r\n      this._drinkInfo = drink;\r\n\r\n      this.populateModal();\r\n    } catch(e) {\r\n      console.log('Could not find that drink');\r\n    }\r\n  }\r\n\r\n  populateModal() {\r\n    document.querySelector('.modal-wrapper').classList.add('active');\r\n    const modal = document.querySelector('.modal');\r\n    const html = `\r\n    <i class=\"far fa-times-circle\"></i>\r\n    <h4 class=\"header\">${this._drinkInfo.name}</h4>\r\n    <div class=\"img-box\">\r\n      <img src=\"${this._drinkInfo.img}\" alt=\"${this._drinkInfo.name} Thumbnail\">\r\n    </div>\r\n    <p class=\"instructions\">${this._drinkInfo.instructions}</p>`;\r\n    modal.insertAdjacentHTML('beforeend', html);\r\n  }\r\n\r\n  closeModal(e) {\r\n    if (e.target.classList.contains('overlay') ||\r\n        e.target.closest('.fa-times-circle')) {\r\n      document.querySelector('.modal').innerHTML = '';\r\n      document.querySelector('.modal-wrapper').classList.remove('active');\r\n    }\r\n  }\r\n\r\n  addEventHandlers() {\r\n    const btns = document.querySelectorAll('.page-btn');\r\n\r\n    btns.forEach(btn => {\r\n      btn.addEventListener('click', this.changePage.bind(this));\r\n    })\r\n  }\r\n}\r\n\r\nexport default new View();","class Data {\r\n\r\n  state = {\r\n    allImgs: null,\r\n    index: 1,\r\n    totalImgs: 1\r\n  }\r\n\r\n  async loadResults(url) {\r\n    console.log(url);\r\n    try {\r\n      const res = await fetch(url);\r\n      if (!res.ok) return new Error('Oops! Could not find your drinks.');\r\n      const {drinks} = await res.json();\r\n      this.state.allImgs = drinks;\r\n      this.state.totalImgs = Math.ceil(this.state.allImgs.length);\r\n      console.log(`Total Images: ${this.state.totalImgs}`);\r\n    } catch (e) {\r\n      console.error(`Oops! ${e.message}`);\r\n    }\r\n  }\r\n\r\n  // pagination() {\r\n  //   const trimStart = (this.state.page - 1) * RES_PER_PAGE;\r\n  //   const trimEnd = trimStart + RES_PER_PAGE;\r\n  //   const results = this.state.allData.slice(trimStart, trimEnd);\r\n\r\n  //   return results;\r\n  // }\r\n\r\n  // changePage(val) {\r\n  //   this.state.page += val;\r\n  //   view.renderProducts(this.getProducts, API_URL);\r\n  // }\r\n\r\n}\r\n\r\nexport default new Data();","import { API_URL } from './config.js';\r\nimport view from './view.js';\r\nimport model from './model.js';\r\n\r\n// CONTROLLER\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n\t// GET INITIAL PRODUCTS\r\n\tawait model.loadResults(API_URL);\r\n\r\n\tawait view.renderResults(model.state);\r\n\r\n\t// EVENT LISTENERS\r\n\tdocument.querySelector('.img-carousel-container').addEventListener('click', view.handleCarouselClick.bind(view));\r\n\tdocument.querySelector('.modal-wrapper').addEventListener('click', view.closeModal);\r\n});"]}