{"version":3,"sources":["js/drinks/config.js","js/drinks/view.js","js/drinks/model.js","js/drinks/controller.js"],"names":["API_KEY","API_URL","RES_PER_PAGE","View","document","querySelector","renderResults","data","_data","paginatedResults","paginateResults","value","clearHTML","generateMarkup","renderPageBtns","addEventHandlers","trimStart","page","trimEnd","results","slice","allData","_parentContainer","innerHTML","map","drink","markup","idDrink","strDrinkThumb","strDrink","renderHTML","html","insertAdjacentHTML","Math","ceil","totalPages","changePage","e","direction","Number","target","dataset","turnPage","querySelectorAll","forEach","btn","addEventListener","bind","handleCarouselClick","closest","id","toggleModal","fetchDrinkInfo","populateModal","url","console","log","res","fetch","drinks","json","name","img","instructions","strInstructions","_drinkInfo","classList","add","modal","closeModal","contains","remove","searchQuery","_query","searchItems","filter","toLowerCase","includes","length","_page","Data","loadResults","category","Error","state","error","message","pagination","model","view","selection"],"mappings":"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","file":"controller.7edb9bbb.js","sourceRoot":"..","sourcesContent":["export const API_KEY = '9973533'; // PERSONAL API_KEY FROM PATREON\r\n// const API_KEY = '1'; TEST API KEY\r\n// const API_URL = `http://www.thecocktaildb.com/api/json/v1/${API_KEY}/search.php?s=margarita`;\r\nexport const API_URL = `https://www.thecocktaildb.com/api/json/v2/${API_KEY}/filter.php?c=`;\r\nexport const RES_PER_PAGE = 6;","import { RES_PER_PAGE, API_KEY } from './config.js';\r\n\r\nclass View {\r\n  _parentContainer = document.querySelector('#drinks-container');\r\n  _data;\r\n  _drinkInfo;\r\n  _query;\r\n\r\n  renderResults(data) {\r\n    this._data = data;\r\n    // console.log(this._data);\r\n    const paginatedResults = this.paginateResults();\r\n\r\n    document.querySelector('#search-bar').value = '';\r\n\r\n    this.clearHTML();\r\n    \r\n    this.generateMarkup(paginatedResults);\r\n\r\n    this.renderPageBtns();\r\n\r\n    this.addEventHandlers();\r\n  }\r\n\r\n  paginateResults(data) {\r\n    if (!data) {\r\n      const trimStart = (this._data.page - 1) * RES_PER_PAGE;\r\n      const trimEnd = trimStart + RES_PER_PAGE;\r\n      const results = this._data.allData.slice(trimStart, trimEnd);\r\n  \r\n      return results;\r\n    } else {\r\n      const trimStart = (this._data.page - 1) * RES_PER_PAGE;\r\n      const trimEnd = trimStart + RES_PER_PAGE;\r\n      const results = data.slice(trimStart, trimEnd);\r\n  \r\n      return results;\r\n    }\r\n  }\r\n\r\n  clearHTML() {\r\n    this._parentContainer.innerHTML = '';\r\n  }\r\n\r\n  generateMarkup(results) {\r\n    results.map(drink => {\r\n      const markup = `\r\n        <div class=\"card card-cocktail\" data-id=\"${drink.idDrink}\">\r\n          <img class=\"img-cocktail\" src=\"${drink.strDrinkThumb}\" alt=\"${drink.strDrink} thumbnail\" />\r\n          <h3 class=\"tab-cocktail\">${drink.strDrink}</h2>\r\n        </div>\r\n      `\r\n      this.renderHTML(markup);\r\n    })\r\n  }\r\n\r\n  renderHTML(html) {\r\n    this._parentContainer.insertAdjacentHTML('beforeend', html);\r\n  }\r\n\r\n  renderPageBtns() {\r\n    this._data.page = Math.ceil(this._data.page);\r\n\r\n    let html;\r\n\r\n    // if on last page of multiple pages\r\n    if (+this._data.totalPages === +this._data.page) {\r\n      html = `\r\n        <button data-turn-page=\"-1\" type=\"button\" class=\"page-btn\"><i class=\"fas fa-arrow-left\"></i> Page ${+this._data.page - 1}</button>\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n      `\r\n    }\r\n    \r\n    // if on 1st with no others\r\n    if (+this._data.totalPages === 1) {\r\n      html = `\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n      `\r\n    }\r\n\r\n    // if on 1st page of multiple pages\r\n    if (+this._data.totalPages > 1 && +this._data.page === 1) {\r\n      html = `\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n        <button data-turn-page=\"1\" type=\"button\" class=\"page-btn\">Page ${+this._data.page + 1} <i class=\"fas fa-arrow-right\"></i></button>\r\n      `\r\n    }\r\n\r\n    // has pages before and after\r\n    if (+this._data.totalPages > 1 && +this._data.page > 1 && +this._data.page < +this._data.totalPages) {\r\n      html = `\r\n        <button data-turn-page=\"-1\" type=\"button\" class=\"page-btn\"><i class=\"fas fa-arrow-left\"></i> Page ${+this._data.page - 1}</button>\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n        <button data-turn-page=\"1\" type=\"button\" class=\"page-btn\">Page ${+this._data.page + 1} <i class=\"fas fa-arrow-right\"></i></button>\r\n      `\r\n    }\r\n\r\n    document.querySelector('.page-btn-container').innerHTML = html;\r\n  }\r\n\r\n  changePage(e) {\r\n    const direction = Number(e.target.dataset.turnPage);\r\n    this._data.page += direction;\r\n    this.renderResults(this._data);\r\n  }\r\n\r\n  addEventHandlers() {\r\n    const btns = document.querySelectorAll('.page-btn');\r\n\r\n    btns.forEach(btn => {\r\n      btn.addEventListener('click', this.changePage.bind(this));\r\n    })\r\n  }\r\n\r\n  handleCarouselClick(e) {\r\n    if (e.target.closest('.card-cocktail')) {\r\n      const id = Number(e.target.closest('.card-cocktail').dataset.id);\r\n      this.toggleModal(id);\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n    // I know this is not supposed to be in the View... :(\r\n      async toggleModal(id) {\r\n        await this.fetchDrinkInfo(id);\r\n        this.populateModal();\r\n      }\r\n    \r\n      async fetchDrinkInfo(id) {\r\n        const url = `https://www.thecocktaildb.com/api/json/v2/${API_KEY}/lookup.php?i=`;\r\n        try {\r\n          console.log(`url: ${url}${id}`);\r\n          const res = await fetch(`${url}${id}`);\r\n          const {drinks} = await res.json();\r\n          const data = drinks[0];\r\n          const drink = {\r\n            id: id,\r\n            name: data.strDrink,\r\n            img: data.strDrinkThumb,\r\n            instructions: data.strInstructions\r\n          };\r\n          console.log(drink);\r\n          this._drinkInfo = drink;\r\n        } catch(e) {\r\n          console.log('Could not find that drink');\r\n        }\r\n      }\r\n    \r\n      populateModal() {\r\n        document.querySelector('.modal-wrapper').classList.add('active');\r\n        const modal = document.querySelector('.modal');\r\n        const html = `\r\n        <i class=\"far fa-times-circle\"></i>\r\n        <h4 class=\"header\">${this._drinkInfo.name}</h4>\r\n        <div class=\"img-box\">\r\n          <img src=\"${this._drinkInfo.img}\" alt=\"${this._drinkInfo.name} Thumbnail\">\r\n        </div>\r\n        <p class=\"instructions\">${this._drinkInfo.instructions}</p>`;\r\n        modal.insertAdjacentHTML('beforeend', html);\r\n      }\r\n    \r\n      closeModal(e) {\r\n        if (e.target.classList.contains('overlay') ||\r\n            e.target.closest('.fa-times-circle')) {\r\n          document.querySelector('.modal').innerHTML = '';\r\n          document.querySelector('.modal-wrapper').classList.remove('active');\r\n        }\r\n      }\r\n\r\n      searchQuery(e) {\r\n        this._query = e.target.value;\r\n\r\n        console.log(this._data);\r\n\r\n        const searchItems = this._data.allData.filter(drink => drink.strDrink.toLowerCase().includes(this._query.toLowerCase()));\r\n        \r\n        this._data.totalPages = Math.ceil(searchItems.length / RES_PER_PAGE);\r\n        this._page = 1;\r\n\r\n        const paginatedResults = this.paginateResults(searchItems);\r\n        console.log(paginatedResults);\r\n\r\n\r\n        this.clearHTML();\r\n        \r\n        this.generateMarkup(paginatedResults);\r\n\r\n        this.renderPageBtns();\r\n\r\n        this.addEventHandlers();\r\n      }\r\n\r\n}\r\n\r\nexport default new View();","import { RES_PER_PAGE } from './config.js';\r\n\r\nclass Data {\r\n\r\n  state = {\r\n    allData: null,\r\n    page: 1,\r\n    totalPages: 1\r\n  }\r\n\r\n  async loadResults(url, category) {\r\n    try {\r\n      const res = await fetch(url + category);\r\n      if (!res) return new Error('Oops! Could not find your drinks.');\r\n      const {drinks} = await res.json();\r\n      this.state.allData = drinks;\r\n      this.state.totalPages = Math.ceil(this.state.allData.length / RES_PER_PAGE);\r\n      console.log(`Total Pages: ${this.state.totalPages}`);\r\n    } catch (e) {\r\n      console.error(`Oops! ${e.message}`);\r\n    }\r\n  }\r\n\r\n  pagination() {\r\n    const trimStart = (this.state.page - 1) * RES_PER_PAGE;\r\n    const trimEnd = trimStart + RES_PER_PAGE;\r\n    const results = this.state.allData.slice(trimStart, trimEnd);\r\n\r\n    return results;\r\n  }\r\n\r\n  // changePage(val) {\r\n  //   this.state.page += val;\r\n  //   view.renderProducts(this.getProducts, API_URL);\r\n  // }\r\n\r\n}\r\n\r\nexport default new Data();","import { API_URL } from './config.js';\r\nimport view from './view.js';\r\nimport model from './model.js';\r\n\r\n// const testCategory = 'Coffee / Tea';\r\n\r\n// CONTROLLER\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n\t// GET INITIAL PRODUCTS\r\n\tconst category = document.querySelector('#category-selector').value;\r\n\r\n\tawait model.loadResults(API_URL, category);\r\n\r\n\tawait view.renderResults(model.state);\r\n\r\n\t// EVENT LISTENERS\r\n\tdocument.querySelector('#category-selector').addEventListener('change', async (e) => {\r\n\t\tconst selection = e.target.value;\r\n\r\n\t\tawait model.loadResults(API_URL, selection);\r\n\r\n\t\tmodel.state.page = 1;\r\n\r\n\t\t// switch(selection) {\r\n\t\t// \tcase 'Cocktail':\r\n\t\t// \t\tdocument.querySelector('.drink-wrapper').style.backgroundColor = 'palegreen';\r\n\t\t// \t\tbreak;\r\n\t\t// \tcase 'Ordinary Drink':\r\n\t\t// \t\tdocument.querySelector('.drink-wrapper').style.backgroundColor = 'paleTurquoise';\r\n\t\t// \t\tbreak;\r\n\t\t// \tcase 'Milk / Float / Shake':\r\n\t\t// \t\tdocument.querySelector('.drink-wrapper').style.backgroundColor = 'lightpink';\r\n\t\t// \t\tbreak;\r\n\t\t// }\r\n\r\n\t\tawait view.renderResults(model.state);\r\n\t});\r\n\t\r\n\tdocument.querySelector('#drinks-container').addEventListener('click', view.handleCarouselClick.bind(view));\r\n\tdocument.querySelector('.modal-wrapper').addEventListener('click', view.closeModal);\r\n\tdocument.querySelector('#search-bar').addEventListener('input', view.searchQuery.bind(view));\r\n});"]}