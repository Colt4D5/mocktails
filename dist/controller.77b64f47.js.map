{"version":3,"sources":["js/drinks/config.js","js/drinks/view.js","js/drinks/model.js","js/drinks/controller.js"],"names":["API_KEY","API_URL","RES_PER_PAGE","View","document","querySelector","renderResults","data","_data","paginatedResults","paginateResults","clearHTML","generateMarkup","renderPageBtns","addEventHandlers","trimStart","page","trimEnd","results","allData","slice","_parentContainer","innerHTML","map","drink","markup","idDrink","strDrinkThumb","strDrink","renderHTML","html","insertAdjacentHTML","totalPages","changePage","e","direction","Number","target","dataset","turnPage","querySelectorAll","forEach","btn","addEventListener","bind","handleCarouselClick","closest","id","toggleModal","fetchDrinkInfo","populateModal","url","console","log","res","fetch","drinks","json","name","img","instructions","strInstructions","_drinkInfo","classList","add","modal","closeModal","contains","remove","Data","loadResults","category","Error","state","Math","ceil","length","error","message","pagination","value","model","view","selection"],"mappings":"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","file":"controller.77b64f47.js","sourceRoot":"..","sourcesContent":["export const API_KEY = '9973533'; // PERSONAL API_KEY FROM PATREON\r\n// const API_KEY = '1'; TEST API KEY\r\n// const API_URL = `http://www.thecocktaildb.com/api/json/v1/${API_KEY}/search.php?s=margarita`;\r\nexport const API_URL = `https://www.thecocktaildb.com/api/json/v2/${API_KEY}/filter.php?c=`;\r\nexport const RES_PER_PAGE = 6;","import { RES_PER_PAGE, API_KEY } from './config.js';\r\n\r\nclass View {\r\n  _parentContainer = document.querySelector('#drinks-container');\r\n  _data;\r\n  _drinkInfo;\r\n\r\n  renderResults(data) {\r\n    this._data = data;\r\n    // console.log(this._data);\r\n    const paginatedResults = this.paginateResults(this._data);\r\n\r\n    this.clearHTML();\r\n    \r\n    this.generateMarkup(paginatedResults);\r\n\r\n    this.renderPageBtns();\r\n\r\n    this.addEventHandlers();\r\n    return;\r\n  }\r\n\r\n  paginateResults(data) {\r\n    const trimStart = (data.page - 1) * RES_PER_PAGE;\r\n    const trimEnd = trimStart + RES_PER_PAGE;\r\n    const results = data.allData.slice(trimStart, trimEnd);\r\n\r\n    return results;\r\n  }\r\n\r\n  clearHTML() {\r\n    this._parentContainer.innerHTML = '';\r\n  }\r\n\r\n  generateMarkup(results) {\r\n    results.map(drink => {\r\n      const markup = `\r\n        <div class=\"card card-cocktail\" data-id=\"${drink.idDrink}\">\r\n          <img class=\"img-cocktail\" src=\"${drink.strDrinkThumb}\" alt=\"${drink.strDrink} thumbnail\" />\r\n          <h3 class=\"tab-cocktail\">${drink.strDrink}</h2>\r\n        </div>\r\n      `\r\n      this.renderHTML(markup);\r\n    })\r\n  }\r\n\r\n  renderHTML(html) {\r\n    this._parentContainer.insertAdjacentHTML('beforeend', html);\r\n  }\r\n\r\n  renderPageBtns() {\r\n    let html;\r\n    \r\n    // if on 1st with no others\r\n    if (+this._data.totalPages === 1) {\r\n      html = `\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n      `\r\n    }\r\n\r\n    // if on 1st page of multiple pages\r\n    if (+this._data.totalPages > 1 && +this._data.page === 1) {\r\n      html = `\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n        <button data-turn-page=\"1\" type=\"button\" class=\"page-btn\">Page ${+this._data.page + 1} ></button>\r\n      `\r\n    }\r\n\r\n    // has pages before and after\r\n    if (+this._data.totalPages > 1 && +this._data.page > 1 && +this._data.page < +this._data.totalPages) {\r\n      html = `\r\n        <button data-turn-page=\"-1\" type=\"button\" class=\"page-btn\">< Page ${+this._data.page - 1}</button>\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n        <button data-turn-page=\"1\" type=\"button\" class=\"page-btn\">Page ${+this._data.page + 1} ></button>\r\n      `\r\n    }\r\n\r\n    // if on last page of multiple pages\r\n    if (+this._data.totalPages === +this._data.page) {\r\n      html = `\r\n        <button data-turn-page=\"-1\" type=\"button\" class=\"page-btn\">< Page ${+this._data.page - 1}</button>\r\n        <span>Page ${this._data.page} of ${this._data.totalPages}</span>\r\n      `\r\n    }\r\n    document.querySelector('.page-btn-container').innerHTML = html;\r\n  }\r\n\r\n  changePage(e) {\r\n    const direction = Number(e.target.dataset.turnPage);\r\n    this._data.page += direction;\r\n    this.renderResults(this._data);\r\n  }\r\n\r\n  addEventHandlers() {\r\n    const btns = document.querySelectorAll('.page-btn');\r\n\r\n    btns.forEach(btn => {\r\n      btn.addEventListener('click', this.changePage.bind(this));\r\n    })\r\n  }\r\n\r\n  handleCarouselClick(e) {\r\n    if (e.target.closest('.card-cocktail')) {\r\n      const id = Number(e.target.closest('.card-cocktail').dataset.id);\r\n      this.toggleModal(id);\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n    // I know this is not supposed to be in the View... :(\r\n      async toggleModal(id) {\r\n        await this.fetchDrinkInfo(id);\r\n        this.populateModal();\r\n      }\r\n    \r\n      async fetchDrinkInfo(id) {\r\n        const url = `https://www.thecocktaildb.com/api/json/v2/${API_KEY}/lookup.php?i=`;\r\n        try {\r\n          console.log(`url: ${url}${id}`);\r\n          const res = await fetch(`${url}${id}`);\r\n          const {drinks} = await res.json();\r\n          const data = drinks[0];\r\n          const drink = {\r\n            id: id,\r\n            name: data.strDrink,\r\n            img: data.strDrinkThumb,\r\n            instructions: data.strInstructions\r\n          };\r\n          console.log(drink);\r\n          this._drinkInfo = drink;\r\n        } catch(e) {\r\n          console.log('Could not find that drink');\r\n        }\r\n      }\r\n    \r\n      populateModal() {\r\n        document.querySelector('.modal-wrapper').classList.add('active');\r\n        const modal = document.querySelector('.modal');\r\n        const html = `\r\n        <i class=\"far fa-times-circle\"></i>\r\n        <h4 class=\"header\">${this._drinkInfo.name}</h4>\r\n        <div class=\"img-box\">\r\n          <img src=\"${this._drinkInfo.img}\" alt=\"${this._drinkInfo.name} Thumbnail\">\r\n        </div>\r\n        <p class=\"instructions\">${this._drinkInfo.instructions}</p>`;\r\n        modal.insertAdjacentHTML('beforeend', html);\r\n      }\r\n    \r\n      closeModal(e) {\r\n        if (e.target.classList.contains('overlay') ||\r\n            e.target.closest('.fa-times-circle')) {\r\n          document.querySelector('.modal').innerHTML = '';\r\n          document.querySelector('.modal-wrapper').classList.remove('active');\r\n        }\r\n      }\r\n\r\n}\r\n\r\nexport default new View();","import { RES_PER_PAGE } from './config.js';\r\n\r\nclass Data {\r\n\r\n  state = {\r\n    allData: null,\r\n    page: 1,\r\n    totalPages: 1\r\n  }\r\n\r\n  async loadResults(url, category) {\r\n    try {\r\n      const res = await fetch(url + category);\r\n      if (!res) return new Error('Oops! Could not find your drinks.');\r\n      const {drinks} = await res.json();\r\n      this.state.allData = drinks;\r\n      this.state.totalPages = Math.ceil(this.state.allData.length / RES_PER_PAGE);\r\n      console.log(`Total Pages: ${this.state.totalPages}`);\r\n    } catch (e) {\r\n      console.error(`Oops! ${e.message}`);\r\n    }\r\n  }\r\n\r\n  pagination() {\r\n    const trimStart = (this.state.page - 1) * RES_PER_PAGE;\r\n    const trimEnd = trimStart + RES_PER_PAGE;\r\n    const results = this.state.allData.slice(trimStart, trimEnd);\r\n\r\n    return results;\r\n  }\r\n\r\n  // changePage(val) {\r\n  //   this.state.page += val;\r\n  //   view.renderProducts(this.getProducts, API_URL);\r\n  // }\r\n\r\n}\r\n\r\nexport default new Data();","import { API_URL } from './config.js';\r\nimport view from './view.js';\r\nimport model from './model.js';\r\n\r\n// const testCategory = 'Coffee / Tea';\r\n\r\n// CONTROLLER\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n\t// GET INITIAL PRODUCTS\r\n\tconst category = document.querySelector('#category-selector').value;\r\n\r\n\tawait model.loadResults(API_URL, category);\r\n\r\n\tawait view.renderResults(model.state);\r\n\r\n\t// EVENT LISTENERS\r\n\tdocument.querySelector('#category-selector').addEventListener('change', async (e) => {\r\n\t\tconst selection = e.target.value;\r\n\r\n\t\tawait model.loadResults(API_URL, selection);\r\n\r\n\t\tmodel.state.page = 1;\r\n\r\n\t\t// switch(selection) {\r\n\t\t// \tcase 'Cocktail':\r\n\t\t// \t\tdocument.querySelector('.drink-wrapper').style.backgroundColor = 'palegreen';\r\n\t\t// \t\tbreak;\r\n\t\t// \tcase 'Ordinary Drink':\r\n\t\t// \t\tdocument.querySelector('.drink-wrapper').style.backgroundColor = 'paleTurquoise';\r\n\t\t// \t\tbreak;\r\n\t\t// \tcase 'Milk / Float / Shake':\r\n\t\t// \t\tdocument.querySelector('.drink-wrapper').style.backgroundColor = 'lightpink';\r\n\t\t// \t\tbreak;\r\n\t\t// }\r\n\r\n\t\tawait view.renderResults(model.state);\r\n\t});\r\n\t\r\n\tdocument.querySelector('#drinks-container').addEventListener('click', view.handleCarouselClick.bind(view));\r\n\tdocument.querySelector('.modal-wrapper').addEventListener('click', view.closeModal);\r\n});"]}